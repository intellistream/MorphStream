package common.platform;

public class HP_Machine extends Platform {
    private static final long serialVersionUID = 5838346702608392798L;

    /**
     * ---latency---
     */
    public HP_Machine() {
        this.latency_L2 = 11.2;//measured latency in ns for each cache line sized tuple access.
        this.latency_LLC = 50;//measured latency in ns for each cache line sized tuple access.
        this.latency_LOCAL_MEM = 110;//measured latency in ns for each cache line access.
        this.cache_line = 64.0;//bytes
        this.CLOCK_RATE = 2.27;//2.27GHz ... 2.27 cycles per nanosecond
        this.CoresPerSocket = 16; //numCPUs() / (numNodes() > 2 ? numNodes() : 1);//168 cores per socket
        this.num_socket = 8;
        this.num_cores = 128;
        bandwidth_map = new double[][]{//MB/s
                {24789.3, 10847.1, 11159.8, 11176.3, 11081.0, 11085.6, 11058.2, 11065.4},
                {10824.8, 24797.5, 11127.0, 11119.3, 11037.0, 11033.5, 11045.4, 11062.5},
                {11141.2, 11184.3, 25107.4, 10772.1, 11101.6, 11104.5, 11096.9, 11089.3},
                {11130.9, 11155.8, 10874.5, 24918.4, 11079.6, 11081.6, 11064.6, 11081.7},
                {11003.9, 11067.5, 11045.4, 11053.3, 24887.7, 10835.5, 11140.3, 11139.7},
                {11019.7, 11048.1, 11055.1, 11066.2, 10840.4, 24711.6, 11138.3, 11144.2},
                {11044.9, 11047.3, 11078.5, 11054.6, 11144.6, 11142.6, 25122.3, 10879.8},
                {11012.5, 11060.6, 11051.3, 11063.2, 11130.6, 11142.3, 10875.4, 25024.1},
        };
        latency_map = new double[][]{// in ns
//                    {0      , 102.1   , 212.5     , 218.7     , 260.4 , 259.6     , 260.7     , 261.7 },
//                    {102.1  , 0       , 211       , 212.5     , 258.8 , 258.2     , 259.2     , 260.3 },
//                    {212.7  , 210.7   , 0         , 101.4     , 259.7 , 258.8     , 258.1     , 259   },
//                    {214.2  , 212.3   , 101.2     , 0         , 261.4 , 260.6     , 260.1     , 260.9 },
//                    {264.6  , 259     , 260.3     , 261.9     , 0     , 101.4     , 214       , 214.7 },
//                    {259.6  , 257.7   , 258.8     , 260.6     , 101.5 , 0         , 212.4     , 213.4 },
//                    {260.9  , 259     , 258       , 259.7     , 213.3 , 212.7     , 0         , 101.8 },
//                    {261.7  , 259.9   , 258.8     , 260.7     , 214.6 , 218.7     , 101.8     , 0     },
//                {123.3, 185.2, 296.7, 299.2, 376.4, 348.5, 347.3, 349.6},
//                {183.8, 122.6, 294.6, 296.2, 344.3, 345.5, 344.2, 345.5},
//                {294.0, 294.0, 122.4, 185.6, 344.7, 345.4, 343.9, 345.8},
//                {295.6, 295.1, 183.1, 123.1, 345.6, 346.4, 344.8, 346.1},
//                {345.7, 346.0, 345.2, 383.5, 122.3, 181.9, 293.9, 294.1},
//                {346.3, 345.8, 345.5, 349.8, 183.1, 122.2, 294.2, 294.7},
//                {347.1, 345.6, 344.6, 349.2, 294.2, 294.3, 122.2, 184.3},
//                {347.5, 346.0, 345.4, 349.5, 294.2, 295.2, 184.5, 122.3},
                //makes each socket identical, and reverse identical
                {123.3, 185.2, 296.7, 299.2, 376.4, 348.5, 347.3, 349.6},
                {185.2, 123.3, 294.6, 296.2, 344.3, 345.5, 344.2, 345.5},
                {296.7, 294.6, 123.3, 185.6, 344.7, 345.4, 343.9, 345.8},
                {299.2, 296.2, 185.6, 123.3, 345.6, 346.4, 344.8, 346.1},
                {376.4, 344.3, 344.7, 345.6, 123.3, 181.9, 293.9, 294.1},
                {348.5, 345.5, 345.4, 346.4, 181.9, 123.3, 294.2, 294.7},
                {347.3, 344.2, 343.9, 344.8, 293.9, 294.2, 123.3, 184.3},
                {349.6, 345.5, 345.8, 346.1, 294.1, 294.7, 184.3, 123.3},
        };
    }
}